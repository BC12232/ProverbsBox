(this["webpackJsonpproverbs-box"]=this["webpackJsonpproverbs-box"]||[]).push([[6],{23:function(e){e.exports=JSON.parse('{"_comment":"Outlines the General Structure of Proverbs","Chapters":31,"Verses":{"1":33,"2":22,"3":35,"4":27,"5":23,"6":35,"7":27,"8":36,"9":18,"10":32,"11":31,"12":28,"13":25,"14":35,"15":33,"16":33,"17":28,"18":24,"19":29,"20":30,"21":31,"22":29,"23":35,"24":34,"25":28,"26":28,"27":27,"28":28,"29":27,"30":33,"31":31},"Sections":[{"Name":"The Beginning of Knowledge","Start":{"Ch":1,"Vs":1},"End":{"Ch":1,"Vs":7}},{"Name":"The Enticement of Sinners","Start":{"Ch":1,"Vs":8},"End":{"Ch":1,"Vs":19}},{"Name":"The Call of Wisdom","Start":{"Ch":1,"Vs":20},"End":{"Ch":1,"Vs":33}},{"Name":"The Value of Wisdom","Start":{"Ch":2,"Vs":1},"End":{"Ch":2,"Vs":22}},{"Name":"Trust in the Lord with All Your Heart","Start":{"Ch":3,"Vs":1},"End":{"Ch":3,"Vs":12}},{"Name":"Blessed is the One Who Finds Wisdom","Start":{"Ch":3,"Vs":13},"End":{"Ch":3,"Vs":35}},{"Name":"A Father\'s Wise Instruction","Start":{"Ch":4,"Vs":1},"End":{"Ch":4,"Vs":27}},{"Name":"Warning Against Adultery","Start":{"Ch":5,"Vs":1},"End":{"Ch":5,"Vs":23}},{"Name":"Practical Warnings","Start":{"Ch":6,"Vs":1},"End":{"Ch":6,"Vs":19}},{"Name":"Warnings Against Adultery","Start":{"Ch":6,"Vs":20},"End":{"Ch":6,"Vs":35}},{"Name":"Warning Against the Adulteress","Start":{"Ch":7,"Vs":1},"End":{"Ch":7,"Vs":27}},{"Name":"The Blessings of Wisdom","Start":{"Ch":8,"Vs":1},"End":{"Ch":8,"Vs":36}},{"Name":"The Way of Wisdom","Start":{"Ch":9,"Vs":1},"End":{"Ch":9,"Vs":12}},{"Name":"The Way of Folly","Start":{"Ch":9,"Vs":13},"End":{"Ch":9,"Vs":18}},{"Name":"The Proverbs of Solomon","Start":{"Ch":10,"Vs":1},"End":{"Ch":22,"Vs":16}},{"Name":"Words of the Wise","Start":{"Ch":22,"Vs":17},"End":{"Ch":24,"Vs":22}},{"Name":"More Sayings of the Wise","Start":{"Ch":24,"Vs":23},"End":{"Ch":24,"Vs":34}},{"Name":"More Proverbs of Solomon","Start":{"Ch":25,"Vs":1},"End":{"Ch":29,"Vs":27}},{"Name":"The Words of Agur","Start":{"Ch":30,"Vs":1},"End":{"Ch":30,"Vs":33}},{"Name":"The Words of King Lemuel","Start":{"Ch":31,"Vs":1},"End":{"Ch":30,"Vs":9}},{"Name":"The Woman Who Fears the Lord","Start":{"Ch":31,"Vs":10},"End":{"Ch":31,"Vs":31}}]}')},37:function(e){e.exports=JSON.parse('{"_comment":"Single verse proverb outline.","Range":[{"Title":"Proverbs of Solomon","Intro":{"Ch":10,"Vs":1,"Part":true},"Start":{"Ch":10,"Vs":1},"End":{"Ch":22,"Vs":16}},{"Title":"More Proverbs of Solomon","Intro":{"Ch":25,"Vs":1,"Part":false},"Start":{"Ch":25,"Vs":1},"End":{"Ch":29,"Vs":27}}]}')},39:function(e,t,n){},55:function(e){e.exports=JSON.parse('{"_comment":"Sayings outline","Sections":[]}')},58:function(e,t,n){e.exports=n(90)},64:function(e,t,n){var r={"./ion-action-sheet-ios.entry.js":[94,36],"./ion-action-sheet-md.entry.js":[95,37],"./ion-alert-ios.entry.js":[96,20],"./ion-alert-md.entry.js":[97,21],"./ion-app_8-ios.entry.js":[98,9],"./ion-app_8-md.entry.js":[99,10],"./ion-avatar_3-ios.entry.js":[100,38],"./ion-avatar_3-md.entry.js":[101,39],"./ion-back-button-ios.entry.js":[102,40],"./ion-back-button-md.entry.js":[103,41],"./ion-backdrop-ios.entry.js":[104,78],"./ion-backdrop-md.entry.js":[105,79],"./ion-button_2-ios.entry.js":[106,42],"./ion-button_2-md.entry.js":[107,43],"./ion-card_5-ios.entry.js":[108,44],"./ion-card_5-md.entry.js":[109,45],"./ion-checkbox-ios.entry.js":[110,46],"./ion-checkbox-md.entry.js":[111,47],"./ion-chip-ios.entry.js":[112,48],"./ion-chip-md.entry.js":[113,49],"./ion-col_3.entry.js":[114,80],"./ion-datetime_3-ios.entry.js":[115,16],"./ion-datetime_3-md.entry.js":[116,17],"./ion-fab_3-ios.entry.js":[117,50],"./ion-fab_3-md.entry.js":[118,51],"./ion-img.entry.js":[119,81],"./ion-infinite-scroll_2-ios.entry.js":[120,34],"./ion-infinite-scroll_2-md.entry.js":[121,35],"./ion-input-ios.entry.js":[122,52],"./ion-input-md.entry.js":[123,53],"./ion-item-option_3-ios.entry.js":[124,54],"./ion-item-option_3-md.entry.js":[125,55],"./ion-item_8-ios.entry.js":[126,56],"./ion-item_8-md.entry.js":[127,57],"./ion-loading-ios.entry.js":[128,22],"./ion-loading-md.entry.js":[129,23],"./ion-menu_3-ios.entry.js":[130,58],"./ion-menu_3-md.entry.js":[131,59],"./ion-modal-ios.entry.js":[132,11],"./ion-modal-md.entry.js":[133,12],"./ion-nav_2.entry.js":[134,15],"./ion-popover-ios.entry.js":[135,13],"./ion-popover-md.entry.js":[136,14],"./ion-progress-bar-ios.entry.js":[137,60],"./ion-progress-bar-md.entry.js":[138,61],"./ion-radio_2-ios.entry.js":[139,62],"./ion-radio_2-md.entry.js":[140,63],"./ion-range-ios.entry.js":[141,64],"./ion-range-md.entry.js":[142,65],"./ion-refresher_2-ios.entry.js":[143,24],"./ion-refresher_2-md.entry.js":[144,25],"./ion-reorder_2-ios.entry.js":[145,32],"./ion-reorder_2-md.entry.js":[146,33],"./ion-ripple-effect.entry.js":[147,82],"./ion-route_4.entry.js":[148,66],"./ion-searchbar-ios.entry.js":[149,67],"./ion-searchbar-md.entry.js":[150,68],"./ion-segment_2-ios.entry.js":[151,69],"./ion-segment_2-md.entry.js":[152,70],"./ion-select_3-ios.entry.js":[153,71],"./ion-select_3-md.entry.js":[154,72],"./ion-slide_2-ios.entry.js":[155,83],"./ion-slide_2-md.entry.js":[156,84],"./ion-spinner.entry.js":[157,28],"./ion-split-pane-ios.entry.js":[158,85],"./ion-split-pane-md.entry.js":[159,86],"./ion-tab-bar_2-ios.entry.js":[160,73],"./ion-tab-bar_2-md.entry.js":[161,74],"./ion-tab_2.entry.js":[162,31],"./ion-text.entry.js":[163,75],"./ion-textarea-ios.entry.js":[164,76],"./ion-textarea-md.entry.js":[165,77],"./ion-toast-ios.entry.js":[166,26],"./ion-toast-md.entry.js":[167,27],"./ion-toggle-ios.entry.js":[168,18],"./ion-toggle-md.entry.js":[169,19],"./ion-virtual-scroll.entry.js":[170,87]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=64,e.exports=a},66:function(e,t,n){var r={"./ion-icon.entry.js":[174,93]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=66,e.exports=a},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(33),s=n.n(o),i=n(14),l=n(51),c=n(1),u=n(6),h=n(4),m=n(5),d=n(8),f=n(9),p=(n(71),n(23)),v=(n(39),n(72),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=p.Sections[this.props.ctx.Section[this.props.ctx.Mode].SectionNumber],t=this.props.ctx.Section[this.props.ctx.Mode].Part;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"article-container"},a.a.createElement("div",{className:"scripture-styles"},a.a.createElement("p",null),a.a.createElement("div",{className:"title"}),a.a.createElement(a.a.Fragment,null,"chapter"===this.props.ctx.BrowseMode?a.a.createElement("p",null,a.a.createElement("b",null,"Chapter ",this.props.model.Verses[0].Chapter)):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"sub-title"},"Chapter ",e.Start.Ch+t),a.a.createElement("p",{className:"lead-title"},a.a.createElement("b",null,e.Name," ")))),this.props.model.Verses.map((function(e){return a.a.createElement("div",{className:"verse"},a.a.createElement("p",{className:"number"},e.VerseNumber),a.a.createElement("p",{className:"ending-verse"},e.Content))})),"}")))}}]),n}(a.a.Component)),y=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return a.a.createElement(c.g,{class:"saying"},a.a.createElement("h1",null,"Saying"))}}]),n}(a.a.Component),g=n(29),E=(n(73),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).tapDuration=250,r.longPressDuration=200,r.openModel=function(){console.log("Opening model"),r.props.openVerseOptions(r.props.model.ID),r.gestureEnd()},r.gestureStart=function(){r.touchStart()},r.gestureEnd=function(){"n"!==r.state.touchState&&(clearTimeout(r.state.holdingTimer),r.setState({holdingTimer:null,touchState:"n"}))},r.touchStart=function(){var e=setTimeout(r.holdStart,r.tapDuration);r.setState({holdingTimer:e,touchState:"t"})},r.holdStart=function(){var e=setTimeout(r.openModel,r.longPressDuration);r.setState({holdingTimer:e,touchState:"h"})},r.saveTapped=function(){},r.state={holdingTimer:void 0,touchState:"n"},r}return Object(m.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return"n"!==this.state.touchState||this.props.scrollStamp===e.scrollStamp}},{key:"componentDidUpdate",value:function(e){"n"!==this.state.touchState&&this.props.scrollStamp!==e.scrollStamp&&(console.log("Scroll Detected: ",this.props.scrollStamp),clearTimeout(this.state.holdingTimer),this.setState({holdingTimer:null,touchState:"n"}))}},{key:"render",value:function(){var e,t=this;console.log("rendering card");var n=this.props.model.Verse.Content,r=this.props.searchHighlights&&this.props.searchHighlights.length?this.props.searchHighlights[0].iStart:n.length;if(this.props.searchHighlights){var o=this.props.searchHighlights.length>0?this.props.searchHighlights[this.props.searchHighlights.length-1].iEnd:0;e=this.props.searchHighlights.reduce((function(e,t){var s=n.substring(e.head,t.iStart),i=n.substring(t.iStart,t.iEnd),l=[],c=e.head;return t.iStart!==r&&(c+=s.length,l.push(a.a.createElement("span",{className:"nonhighlight",key:c},s))),c+=i.length,l.push(a.a.createElement("span",{className:"highlight",key:c},i)),o===t.iEnd&&l.push(a.a.createElement("span",{className:"nonhighlight",key:-1},n.substring(t.iEnd,n.length-1))),{payload:[].concat(Object(g.a)(e.payload),l),head:c}}),{payload:[a.a.createElement("span",{className:"nonhighlight",key:0},n.substring(0,r))],head:r}).payload}else e=n;return a.a.createElement("span",{className:"statement",onClick:this.holdStart},a.a.createElement("div",{className:"statement-view"+("h"===this.state.touchState?" shrinking":""),onDrag:function(){console.log("Dragging")},onScroll:function(){console.log("scrolling")}},a.a.createElement("h3",{className:"verse-content"},e),a.a.createElement("div",{className:"bar"}),a.a.createElement("div",{className:"info-bar"},a.a.createElement("p",{className:"verse-name"},"Proverbs ",this.props.model.Verse.Chapter,":",this.props.model.Verse.VerseNumber),a.a.createElement(c.l,{onTouchStart:function(e){e.stopPropagation()},onMouseDown:function(e){e.stopPropagation()},onClick:function(e){e.preventDefault(),t.props.heartCallback()},className:"save-icon",icon:this.props.model.Saved?u.n:u.o}))))}}]),n}(a.a.Component)),b=n(18),k=n(37),S=n(20),C=n.n(S),N=function(e){var t=e.context.Chapter[e.context.Mode];return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"select-mode-container"},a.a.createElement("h3",{id:"mode-text"},"Proverbs")),a.a.createElement("div",{id:"top-shadow"}),a.a.createElement("div",{className:"selection-box",onTouchStart:function(e){return e.preventDefault()}},a.a.createElement(c.w,{value:t.toString(),onIonChange:function(t){var n;n=t.detail.value,e.setContext(C()(e.context,{Chapter:Object(b.a)({},e.context.Mode,{$set:n})}))}},k.Range.map((function(e){return a.a.createElement("div",{key:e.Start.Ch},a.a.createElement("p",{className:"title"},e.Title),a.a.createElement(c.p,null,Array.from({length:e.End.Ch-e.Start.Ch+1},(function(t,n){return n+e.Start.Ch})).map((function(e){return a.a.createElement(c.m,{key:e},a.a.createElement(c.n,{className:"chapter-select"},a.a.createElement("span",{className:"text"},"Chapter ",e)),a.a.createElement(c.v,{slot:"start",value:e.toString()}))}))))}))))," ")},V=function(e){var t=function(t){e.setContext(C()(e.context,{BrowseMode:{$set:t}}))};return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{id:"select-mode-container"},a.a.createElement("h3",{id:"mode-text"},"Proverbs"),"chapter"===e.context.BrowseMode?a.a.createElement(c.e,{id:"mode-button",size:"small",color:"dark",onClick:function(){t("descriptor")}},"Select by Descriptor"):a.a.createElement(c.e,{id:"mode-button",size:"small",color:"dark",onClick:function(){t("chapter")}},"Select by Chapter")),a.a.createElement("div",{id:"top-shadow"}),"chapter"===e.context.BrowseMode?a.a.createElement("div",{className:"selection-box",onTouchStart:function(e){return e.preventDefault()}},console.log("all chapters",e.context.Chapter.all),a.a.createElement(c.w,{value:e.context.Chapter.all.toString(),onIonChange:function(t){e.setContext(C()(e.context,{Chapter:{all:{$set:t.detail.value}}}))}},Object.keys(p.Verses).map((function(e){return a.a.createElement(c.m,{key:e},a.a.createElement(c.n,{className:"chapter-select"},a.a.createElement("span",{className:"text"},"Chapter ",e)),a.a.createElement(c.v,{slot:"start",value:e.toString()}))})))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"selection-box",onTouchStart:function(e){return e.preventDefault()}},console.log("all chapters",e.context.Chapter.all),a.a.createElement(c.w,{value:JSON.stringify(e.context.Section.all),onIonChange:function(t){console.log(t.detail.value),e.setContext(C()(e.context,{Section:{all:{$set:JSON.parse(t.detail.value)}}}))}},p.Sections.map((function(e,t){if(e.Start.Ch!==e.End.Ch){var n=e.End.Ch-e.Start.Ch+1;return Object(g.a)(Array(n).keys()).map((function(n){return a.a.createElement(c.m,{key:e.Start.Vs+"000"+e.Start.Ch+n},a.a.createElement(c.n,{className:"chapter-select"},a.a.createElement("span",{className:"text"},e.Name+", pt. "+(n+1))),a.a.createElement(c.v,{slot:"start",value:JSON.stringify({SectionNumber:t,Part:n})}))}))}return a.a.createElement(c.m,{key:e.Start.Vs+"000"+e.Start.Ch},a.a.createElement(c.n,{className:"chapter-select"},a.a.createElement("span",{className:"text"},e.Name)),a.a.createElement(c.v,{slot:"start",value:JSON.stringify({SectionNumber:t,Part:0})}))}))))," "))},j=function(e){var t;if("statement"===e.context.Mode)t=a.a.createElement(N,{context:e.context,setContext:e.setContext});else{if("all"!==e.context.Mode)throw new Error("unrecognized context mode.");t=a.a.createElement(V,{context:e.context,setContext:e.setContext})}return a.a.createElement(c.u,{id:"popover-filter",event:e.event,isOpen:e.isOpen,onDidDismiss:function(t){e.onDismiss()}},a.a.createElement(c.i,{scrollY:!1},a.a.createElement("div",{id:"filter-container"},a.a.createElement("div",null,a.a.createElement(c.A,{value:e.context.Mode,onIonChange:function(t){void 0!==t.detail.value&&e.setContext(C()(e.context,{Mode:{$set:t.detail.value}}))}},a.a.createElement(c.B,{value:"statement"},a.a.createElement(c.n,null,"Statements")),a.a.createElement(c.B,{value:"all"},a.a.createElement(c.n,null,"All")))),t)," "))},O=n(16),x=(n(75),n(3)),w=n.n(x),M=n(7),T={KJV:{Label:"King James Version",Data:"./assets/translations/KJV-Proverbs.json",Loader:function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,[{key:"Load",value:function(){var e=Object(M.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){fetch(t).then((function(e){return e.json()})).then((function(t){var n=t.verses.map((function(e){return{Content:e.text,Chapter:e.chapter,VerseNumber:e.verse}}));e(n)})).catch((function(e){console.log("Error: failed to load translation asset: ",t),n("failed to load translation asset: "+t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},LEB:{Label:"Lexham English Version",Data:"./assets/translations/Lexham-Proverbs.json",Loader:function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,[{key:"Load",value:function(){var e=Object(M.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){fetch(t).then((function(e){return e.json()})).then((function(t){var n=Object.entries(t.passages).map((function(e){if("string"!==typeof e[1])throw Error();return{Content:e[1].toString(),Chapter:parseInt(e[0].split(":")[0]),VerseNumber:parseInt(e[0].split(":")[1])}}));e(n)})).catch((function(t){console.log("Error: failed to load translation asset."),e([])}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()}},I=function(e){var t=Object(r.useState)(e.contentManager.GetTranslationName()),n=Object(O.a)(t,2),o=n[0],s=n[1],i=Object(r.useState)("LOADING"===o),l=Object(O.a)(i,2),u=l[0],h=l[1];"LOADING"===o&&e.contentManager.OnLoadTranslation((function(){h(!1),s(e.contentManager.GetTranslationName())}));var m=Object(r.useState)(!1),d=Object(O.a)(m,2),f=d[0],p=d[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.e,{class:"translation-toggle",onClick:function(){p(!0)}},u?a.a.createElement("div",{className:"spin-container"},a.a.createElement(c.C,{color:"light",name:"dots"})):a.a.createElement("p",{className:"version-tag"},o.substr(0,4).toUpperCase())),a.a.createElement(c.b,{isOpen:f,onDidDismiss:function(){return p(!1)},inputs:Object.entries(T).map((function(t){var n=Object(O.a)(t,2),r=n[0];return{name:r,type:"radio",label:n[1].Label,value:r,checked:e.contentManager.GetTranslationName()===r}})),buttons:[{text:"Select Translation",handler:function(t){h(!0),e.contentManager.LoadTranslation(t).then((function(){s(t),h(!1),e.setModel(e.contentManager.GetModel())}))}}]}))},D={typeDisplay:"statement",filterFormat:"chapter",chapter:{statement:10,saying:15,all:1},section:{statement:{SectionNumber:10,Part:0},saying:{SectionNumber:10,Part:0},all:{SectionNumber:0,Part:0}},translation:"LEB",browseMode:"descriptor"},F=n(54),G=n(55),L=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,null,[{key:"GetVerseID",value:function(e,t){return 1e3*e+t}},{key:"GetVerseSignature",value:function(e){return{Chapter:Math.floor(e/1e3),VerseNumber:e%1e3}}},{key:"PermuteVerses",value:function(){return Object.entries(p.Verses).reduce((function(e,t){for(var n=Object(O.a)(t,2),r=n[0],a=n[1],o=0;o<a;++o){var s={Chapter:parseInt(r),VerseNumber:o+1};e.push(s)}return e}),[])}},{key:"IsVerseBetween",value:function(e,t,n){return!(e.Chapter<t.Chapter||e.Chapter>n.Chapter)&&!(e.Chapter===t.Chapter&&e.VerseNumber<t.VerseNumber||e.Chapter===n.Chapter&&e.VerseNumber>n.VerseNumber)}},{key:"GetVerseType",value:function(e){var t=this,n=G,r=k,a=this.GetVerseSignature(e),o=function(){for(var e=0,r=Object.entries(n.Sections);e<r.length;e++)for(var o=Object(O.a)(r[e],2),s=o[0],i=o[1],l=0,c=Object.entries(i.Sayings);l<c.length;l++){var u=Object(O.a)(c[l],2),h=u[0],m=u[1],d={Chapter:m.Start.Ch,VerseNumber:m.Start.Vs},f={Chapter:m.End.Ch,VerseNumber:m.End.Vs};if(t.IsVerseBetween(a,d,f))return{found:!0,types:["Saying"],group:1e3*parseInt(s+1)+parseInt(h)}}return{found:!1}}();if(o.found)return o;var s=function(){var n,o=Object(F.a)(r.Range);try{for(o.s();!(n=o.n()).done;){var s=n.value,i={Chapter:s.Start.Ch,VerseNumber:s.Start.Vs},l={Chapter:s.End.Ch,VerseNumber:s.End.Vs};if(t.IsVerseBetween(a,i,l))return a.Chapter===s.Intro.Ch&&a.VerseNumber===s.Intro.Vs?s.Intro.Part?{found:!0,types:["Title","Statement"]}:{found:!0,types:["Title"],group:e}:{found:!0,types:["Statement"],group:e}}}catch(c){o.e(c)}finally{o.f()}return{found:!1}}();return s.found?s:{found:!0,types:["Article"],group:a.Chapter}}},{key:"LoadVerseMetadata",value:function(e){var t=this.GetVerseType(this.GetVerseID(e.Chapter,e.VerseNumber));t.types&&(e.Type=t.types[0],2===t.types.length&&(e.Type=t.types[1],e.TitlePrefix="placeholder")),t.group&&(e.GroupID=t.group)}},{key:"SearchVerseHighlight",value:function(e,t){for(var n,r=new RegExp(t,"gi"),a=!1;null!==(n=r.exec(e.Content));)a=!0,e.SearchHighlights||(e.SearchHighlights=[]),e.SearchHighlights.push({iStart:n.index,iEnd:n.index+n[0].length});return a}},{key:"SearchVerseClear",value:function(e){e.SearchHighlights=void 0}}]),e}(),A=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).cm=void 0,r.ref=void 0,r.setContext=function(e){if(console.log("setting context: ",e),r.cm.ClearFiltersNoRefresh(),r.cm.ApplyFilter("ByType",e.Mode),"chapter"===e.BrowseMode||"statement"===e.Mode)r.cm.ApplyFilter("ByChapter",Number(e.Chapter[e.Mode]));else{var t=p.Sections[e.Section[e.Mode].SectionNumber],n={Chapter:t.Start.Ch,VerseNumber:t.Start.Vs},a={Chapter:t.End.Ch,VerseNumber:t.End.Vs},o=t.Start.Ch+e.Section[e.Mode].Part;r.cm.ApplyFilter("BySpan",n,a),r.cm.ApplyFilter("ByChapter",o)}r.setState({context:e}),r.setState({model:r.cm.GetModel()})},r.setModel=function(e){r.setState({model:e})},r.openVerseOptions=function(e){r.setState({showVerseOptions:!0})},r.scrollHandler=function(e){r.setState({scrollStamp:e.timeStamp})},r.heartHandler=function(e){e.Saved?(console.log("Removing heart"),r.cm.RemoveBookmark({Chapter:e.Verse.Chapter,VerseNumber:e.Verse.VerseNumber})):(console.log("adding heart"),r.cm.Bookmark({Chapter:e.Verse.Chapter,VerseNumber:e.Verse.VerseNumber})),r.setState({model:r.cm.GetModel()})},r.cm=r.props.contentManager,r.ref=a.a.createRef(),r.state={searchContent:"",popClickEvent:void 0,popOpen:!1,model:r.cm.GetModel(),context:{Mode:D.typeDisplay,Chapter:D.chapter,Section:D.section,BrowseMode:D.browseMode},scrollStamp:0,showVerseOptions:!1},r.cm.LoadTranslation(D.translation).then((function(){r.cm.ApplyFilter("ByType",r.state.context.Mode),r.cm.ApplyFilter("ByChapter",r.state.context.Chapter[D.typeDisplay]),r.setState({model:r.cm.GetModel()})})),r}return Object(m.a)(n,[{key:"ionViewWillEnter",value:function(){this.cm.RestoreFilters("library")}},{key:"ionViewDidLeave",value:function(){this.cm.CacheFilters("library")}},{key:"onSearch",value:function(e){this.cm.UpdateSearch(e),this.setState({model:this.cm.GetModel()})}},{key:"onSearchClear",value:function(){this.cm.UpdateSearch("")}},{key:"render",value:function(){var e=this,t=[];this.state.model.ComponentModels.forEach((function(n){if("Article"===n.Type){var r=n.Model.Verses[0];t.push({key:L.GetVerseID(r.Chapter,r.VerseNumber),element:a.a.createElement(v,{ctx:e.state.context,model:n.Model})})}else if("Statement"===n.Type){var o=n.Model;t.push({key:L.GetVerseID(o.Verse.Chapter,o.Verse.VerseNumber),element:a.a.createElement("div",{style:{width:"20em"}},a.a.createElement(E,{model:o,heartCallback:function(){e.heartHandler(o)},scrollStamp:e.state.scrollStamp,openVerseOptions:e.openVerseOptions,searchHighlights:o.Verse.SearchHighlights}))})}else if("Saying"===n.Type){var s=n.Model.Verses[0];t.push({key:L.GetVerseID(s.Chapter,s.VerseNumber),element:a.a.createElement(y,{model:n.Model})})}})),console.log("rendering library");var n=a.a.createRef();return a.a.createElement(c.t,{className:"library-page",ref:n},a.a.createElement(c.k,null,a.a.createElement(j,{context:this.state.context,setContext:this.setContext,isOpen:this.state.popOpen,event:this.state.popClickEvent,onDismiss:function(){e.setState({popOpen:!1,popClickEvent:void 0})}}),a.a.createElement(c.H,null,a.a.createElement(c.f,{slot:"start"},a.a.createElement(c.e,{onClick:function(t){t.persist(),e.setState({popClickEvent:t,popOpen:!0})}},a.a.createElement(c.l,{slot:"icon-only",icon:u.b})),a.a.createElement(I,{contentManager:this.cm,setModel:this.setModel})),a.a.createElement(c.G,null,"Library")),a.a.createElement(c.H,null,a.a.createElement(c.z,{onIonChange:function(t){e.onSearch(t.detail.value)},onIonClear:function(t){return e.onSearchClear()}}))),a.a.createElement(c.i,{className:"proverb-panel",scrollEvents:!0,onIonScrollStart:this.scrollHandler},a.a.createElement(c.s,{isOpen:this.state.showVerseOptions,swipeToClose:!0,presentingElement:n.current,onDidDismiss:function(){e.setState({showVerseOptions:!1})}},a.a.createElement("div",{id:"parentmodeldiv"},a.a.createElement("div",{id:"modeldiv"},a.a.createElement("p",null,"Folder 1"),a.a.createElement("p",null,"Folder 2"),a.a.createElement("p",null,"Folder 3"),a.a.createElement(c.e,{onClick:function(){e.setState({showVerseOptions:!1})}},"Close Example")))),a.a.createElement(c.j,null,t.map((function(e){return a.a.createElement(c.y,{key:e.key,className:"ion-justify-content-center"},e.element)}))),a.a.createElement("div",{className:"next-button-container"},a.a.createElement(c.e,{fill:"clear",className:"next-button",onClick:function(){console.log("Hello")}},a.a.createElement(c.l,{icon:u.l})))))}}]),n}(a.a.Component),B=Object(c.L)(A),P=(n(76),n(24)),R=P.a.LocalNotifications,_=P.a.Storage,H=function(){function e(){Object(h.a)(this,e),this.MAX_NOTIFICATIONS=2,this.id=0,this.frequency=0,this.start=-1,this.end=-1,this.verses=[]}return Object(m.a)(e,[{key:"BakeNotification",value:function(e,t,n,r){this.SetFrequency(e),this.SetNotificationHourRange(t,n),this.SetNotificationContent(r),this.NotificationSetter()}},{key:"SetFrequency",value:function(e){_.set({key:"frequency",value:e.toString()})}},{key:"SetNotificationHourRange",value:function(e,t){_.set({key:"start",value:e.toString()}),_.set({key:"end",value:t.toString()})}},{key:"SetNotificationContent",value:function(e){_.set({key:"verses",value:JSON.stringify(e)})}},{key:"GetFrequency",value:function(){var e=Object(M.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get({key:"frequency"});case 2:return t=e.sent,n=0,null!=t.value&&(n=parseInt(t.value)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"GetStart",value:function(){var e=Object(M.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get({key:"start"});case 2:return t=e.sent,n=0,null!=t.value&&(n=parseInt(t.value)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"GetEnd",value:function(){var e=Object(M.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get({key:"end"});case 2:return t=e.sent,n=0,null!=t.value&&(n=parseInt(t.value)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"GetContent",value:function(){var e=Object(M.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.get({key:"verses"});case 2:if(t=e.sent,n=[],null==t.value){e.next=8;break}return e.next=7,JSON.parse(t.value);case 7:n=e.sent;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"LoadParams",value:function(){var e=Object(M.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.GetFrequency();case 2:return this.frequency=e.sent,e.next=5,this.GetStart();case 5:return this.start=e.sent,e.next=8,this.GetEnd();case 8:return this.end=e.sent,e.next=11,this.GetContent();case 11:this.verses=e.sent;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ClearNotifications",value:function(){var e=Object(M.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.LocalNotifications.getPending();case 2:0!=(t=e.sent).notifications.length&&P.a.LocalNotifications.cancel(t),this.frequency=0,this.start=0,this.end=0,this.verses=[];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"NotificationSetter",value:function(){var e=Object(M.a)(w.a.mark((function e(){var t,n,r,a,o,s,i,l,c,u,h,m,d,f;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ClearNotifications();case 2:return e.next=4,this.LoadParams();case 4:if(0!==this.verses.length){e.next=6;break}return e.abrupt("return");case 6:t=new Date,t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=Math.floor(this.end/100),r=this.end%100,a=Math.floor(this.start/100),o=this.start%100,i=(60*n*60*1e3+60*r*1e3-(s=60*a*60*1e3+60*o*1e3))/this.frequency,l=0,c=0;case 17:if(!(l<this.MAX_NOTIFICATIONS)){e.next=37;break}u=s,h=0;case 20:if(!(h<this.frequency)){e.next=34;break}if(m=this.verses[this.getRandomIndex(this.verses.length)],d="Proverbs "+m.Chapter+":"+m.VerseNumber,f=m.Content,R.schedule({notifications:[{title:d,body:f,id:24*c*60*60*1e3+u,schedule:{at:new Date(t.getTime()+24*c*60*60*1e3+u)}}]}),!(++l>=this.MAX_NOTIFICATIONS)){e.next=28;break}return e.abrupt("break",34);case 28:console.log(new Date(t.getTime()+24*c*60*60*1e3+u)),u+=i,this.id++;case 31:++h,e.next=20;break;case 34:c++,e.next=17;break;case 37:console.log(R.getPending());case 38:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRandomIndex",value:function(e){return Math.floor(Math.random()*Math.floor(e))}}]),e}(),W=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)(!1),i=Object(O.a)(s,2),l=i[0],h=i[1],m=Object(r.useState)(!1),d=Object(O.a)(m,2),f=d[0],p=d[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.t,{className:"bookmarked-page"},a.a.createElement(c.q,{side:"start",contentId:"folders-menu-content"},a.a.createElement(c.k,{mode:"md"},a.a.createElement(c.H,{color:"primary"},a.a.createElement(c.f,{slot:"start"},a.a.createElement(c.e,null,a.a.createElement(c.l,{icon:u.m}))),a.a.createElement(c.f,{slot:"end"},a.a.createElement(c.e,{onClick:function(){return h(!l)}},l?a.a.createElement(c.l,{icon:u.s}):a.a.createElement(c.l,{icon:u.u}))),a.a.createElement(c.G,{slot:"start"},"Folder")),a.a.createElement("div",{className:"select-all-default ".concat(l?"select-all-revealed":"")},a.a.createElement("div",{className:"half-container-left"},a.a.createElement(c.e,{mode:"ios",fill:"clear",expand:"block",size:"small"},"Select All")),a.a.createElement("div",{className:"half-container-right"},a.a.createElement(c.e,{mode:"ios",fill:"clear",expand:"block",size:"small"},"Deselect All"))),a.a.createElement("div",{className:"new-folder-default \n                            ".concat(l?"new-folder-hidden":"","\n                            ").concat(f?"blink":""),onClick:function(){p(!0),console.log("entering new folder mode.")}},a.a.createElement("h3",null,"New Folder"))),a.a.createElement(c.i,{id:"folders-menu-content",onClick:function(){console.log("clicked!!!")}},a.a.createElement("div",{className:"category-list-container ion-activateable",style:{pointerEvents:"auto"}},a.a.createElement(c.p,{className:"folder-list"},a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Wisdom Verses"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Stewardship Verses"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Menu Item"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Stewardship Verses"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Menu Item"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Stewardship Verses"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Menu Item"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Stewardship Verses"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Menu Item"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Stewardship Verses"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Menu Item"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Menu Item"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Stewardship Verses"),a.a.createElement(c.m,{button:!0,detail:!0},a.a.createElement(c.l,{icon:u.t,className:"notification-default ".concat(l?"notification-revealed":"")}),"Menu Item"))),a.a.createElement("div",{className:"button-holder"},a.a.createElement(c.e,{shape:"round",class:"set-notification-button"},"Set Notifications")))),a.a.createElement(c.k,null,a.a.createElement(c.H,null,a.a.createElement(c.f,{slot:"start"},a.a.createElement(c.r,null,a.a.createElement(c.e,null,a.a.createElement(c.l,{slot:"icon-only",icon:u.m})))),a.a.createElement(c.G,null," Bookmarks "))),a.a.createElement(c.i,null,a.a.createElement(c.u,{isOpen:n,onDidDismiss:function(e){o(!1),console.log("Pop");var t=new H,n=new Date,r=100*n.getHours()+n.getMinutes()+1,a=r+1;t.BakeNotification(2,r,a,[{Chapter:1,VerseNumber:10,Content:"My son, if sinful men entice you, do not give in to them"},{Chapter:1,VerseNumber:15,Content:"my son, do not go along with them, do not set foot on their paths"}])}},a.a.createElement("p",null,"This is popover")),a.a.createElement(c.r,null,a.a.createElement(c.e,{expand:"full"},"Open Menu")),a.a.createElement(c.e,{expand:"full",onClick:function(){return o(!0)}},"Open Popover"),a.a.createElement(c.p,null,a.a.createElement(c.m,{routerLink:"/bookmarked/details"},a.a.createElement(c.n,null,a.a.createElement("h2",null,"Go to detail")))))))},J=(n(77),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).proverbCenterRef=a.a.createRef(),r.foward=function(){r.setState((function(e){return e.head===e.selectedStatements.length-1?{selectedStatements:C()(e.selectedStatements,{$push:[(t=r.state.allStatements,console.log("selected random"),t[Math.floor(Math.random()*t.length)])]}),head:e.head+1}:{selectedStatements:e.selectedStatements,head:e.head+1};var t}))},r.back=function(){r.state.head>0&&r.setState((function(e){return{head:e.head-1}}))},r.state={allStatements:[],selectedStatements:[],head:-1},r}return Object(m.a)(n,[{key:"ionViewWillEnter",value:function(){this.props.contentManager.IsTranslatationReady()&&(0===this.state.allStatements.length&&(this.props.contentManager.ClearFiltersNoRefresh(),this.props.contentManager.ApplyFilter("ByType","statement"),this.setState({allStatements:this.props.contentManager.GetModel().ComponentModels.map((function(e){return e.Model}))})),this.foward())}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.t,null,a.a.createElement(c.k,null,a.a.createElement(c.H,null,a.a.createElement(c.G,null,"Discover"))),a.a.createElement(c.i,{className:"discover-content"},a.a.createElement(c.j,null,a.a.createElement(c.y,{"justify-content-center":!0,"align-items-center":!0},a.a.createElement(c.h,{size:"1",className:"button-col"},a.a.createElement(c.e,{expand:"full",size:"small",disabled:0===this.state.head,fill:"clear",className:"back-button",onClick:this.back},a.a.createElement(c.l,{icon:u.f}))),a.a.createElement(c.h,{size:"10","align-self-center":!0},a.a.createElement("div",{id:"proverb-center"},this.state.selectedStatements.length>0?a.a.createElement(E,{model:this.state.selectedStatements[this.state.head],heartCallback:function(){},scrollStamp:0,openVerseOptions:function(){}}):a.a.createElement(a.a.Fragment,null))),a.a.createElement(c.h,{size:"1",className:"button-col"},a.a.createElement(c.e,{size:"small",fill:"clear",className:"forward-button",onClick:this.foward},a.a.createElement(c.l,{icon:u.h}))))))))}}]),n}(a.a.Component)),q=Object(c.L)(J),z=function(){return a.a.createElement(c.t,null,a.a.createElement(c.k,null,a.a.createElement(c.H,null,a.a.createElement(c.f,{slot:"start"},a.a.createElement(c.d,{defaultHref:"/bookmarked"})),a.a.createElement(c.G,null,"Detail"))),a.a.createElement(c.i,null,a.a.createElement("p",null,"Details")))},U=(n(78),n(79),n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),function(){function e(){Object(h.a)(this,e),this.book=void 0,this.translationName=void 0,this.onLoadedCallbacks=void 0,this.book=[],this.translationName="NONE",this.onLoadedCallbacks=[]}return Object(m.a)(e,[{key:"GetTranslationName",value:function(){return this.translationName}},{key:"IsReady",value:function(){return!("LOADING"===this.translationName||"NONE"===this.translationName)}},{key:"IsLoading",value:function(){return"LOADING"===this.translationName}},{key:"AddOnLoadedCallback",value:function(e){this.IsReady()?e(!0):this.onLoadedCallbacks.push(e)}},{key:"LoadTranslation",value:function(e){var t=this;if(this.translationName!==e){this.translationName="LOADING";var n=Object.entries(T).filter((function(t){return t[0]===e}))[0][1];(new n.Loader).Load(n.Data).then((function(n){t.book=n,t.translationName=e,t.TriggerCallbacks()}))}else setTimeout((function(){t.TriggerCallbacks()}),0)}},{key:"TriggerCallbacks",value:function(){this.onLoadedCallbacks.forEach((function(e){setTimeout((function(){e(!0)}),0)})),this.onLoadedCallbacks=[]}},{key:"GetContent",value:function(e){if("NONE"===this.translationName)throw Error("Translation version has not been set");if("LOADING"===this.translationName)throw Error("Translation version is still loading. Try use a callback using AddOnLoadedCallback()");var t=L.GetVerseSignature(e),n=t.VerseNumber,r=t.Chapter,a=this.book.filter((function(e){return e.VerseNumber===n&&e.Chapter===r}))[0];return void 0===a?(console.log(this.translationName),console.log("VerseID ",e),console.log(this.book),{Content:"loading",Chapter:1,VerseNumber:1}):{Content:a.Content,Chapter:a.Chapter,VerseNumber:a.VerseNumber}}}]),e}()),$=P.a.Storage,K=function(){function e(){Object(h.a)(this,e),this.storedIDs=[]}return Object(m.a)(e,[{key:"loadFile",value:function(){var e=Object(M.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get({key:"index"});case 2:if(null==(t=e.sent).value){e.next=7;break}return e.next=6,JSON.parse(t.value);case 6:this.storedIDs=e.sent;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"BookmarkVerse",value:function(e){this.isBookmarked(e)||(this.storedIDs.push(e),$.set({key:"index",value:JSON.stringify(this.storedIDs)}))}},{key:"removeBookmark",value:function(e){if(this.isBookmarked(e)){var t=this.storedIDs.indexOf(e);this.storedIDs.splice(t,1),$.set({key:"index",value:JSON.stringify(this.storedIDs)})}}},{key:"isBookmarked",value:function(e){return-1!==this.storedIDs.indexOf(e)}},{key:"getFolderKey",value:function(e){return"folder-memory-key-"+e}},{key:"getFolders",value:function(){var e=Object(M.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.get({key:"folders"}).then((function(e){return e.value?JSON.parse(e.value):[]})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setFolders",value:function(){var e=Object(M.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.set({key:"folders",value:JSON.stringify(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createFolder",value:function(){var e=Object(M.a)(w.a.mark((function e(t){var n=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFolders().then((function(e){if(e.some((function(e){return e.name===t})))throw new Error("Folder "+t+" already exists.");var r=e.reduce((function(e,t){return Math.max(e,t.order)}),-1)+1,a=e.reduce((function(e,t){return Math.max(e,t.id)}),-1)+1;return e.push({id:a,name:t,memoryLocation:n.getFolderKey(t),order:r,notificationsOn:!1}),e})).then((function(e){return n.setFolders(e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFolder",value:function(){var e=Object(M.a)(w.a.mark((function e(t){var n=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFolders().then((function(e){var n=e.find((function(e){return e.id===t.id}));if(void 0===n)throw new Error("Folder not found.");return{folders:e,toRemove:n}})).then((function(e){var t=e.folders,n=e.toRemove,r=n.id,a=n.order;return t.reduce((function(e,t){return t.order>a&&--t.order,t.id!==r?[].concat(Object(g.a)(e),[t]):e}),[])})).then((function(e){return n.setFolders(e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renameFolder",value:function(){var e=Object(M.a)(w.a.mark((function e(t,n){var r=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFolders().then((function(e){var r=e.find((function(e){return e.id===t.id}));if(void 0===r)throw new Error("Folder not found.");return r.name=n,e})).then((function(e){return r.setFolders(e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"reorderFolders",value:function(){var e=Object(M.a)(w.a.mark((function e(t,n){var r=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFolders().then((function(e){var n=e.find((function(e){return e.id===t.id}));if(void 0===n)throw new Error("Folder not found.");return{folders:e,toReorder:n}})).then((function(e){var t=e.folders,r=e.toReorder.order;return r<n?t.map((function(e){return e.order===r?e.order=n:e.order<=n&&e.order>r&&--e.order,e})):r>n?t.map((function(e){return e.order===r?e.order=n:e.order>=n&&e.order<r&&++e.order,e})):t})).then((function(e){return r.setFolders(e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFolderVerseIds",value:function(){var e=Object(M.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$.get({key:t.memoryLocation}).then((function(e){return e.value?JSON.parse(e.value):[]})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addVerseToFolder",value:function(){var e=Object(M.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFolderVerseIds(t).then((function(e){return e.push(n)})).then((function(e){$.set({key:t.memoryLocation,value:JSON.stringify(e)})})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),X={BySpan:function(e,t){return{name:"BySpan",callback:function(n){return L.IsVerseBetween(n,e,t)}}},ByType:function(e){var t=function(t){var n=L.GetVerseType(L.GetVerseID(t.Chapter,t.VerseNumber)).types;return void 0!==n&&n.some((function(t){return t.toLowerCase()===e.toLowerCase()}))};return"all"===e&&(t=function(e){return!0}),{name:"ByType",callback:t}},ByChapter:function(e){return{name:"ByChapter",callback:function(t){return t.Chapter===e}}},BySaved:function(e){return{name:"BySaved",callback:function(t){return e.isBookmarked(L.GetVerseID(t.Chapter,t.VerseNumber))}}}},Y=new(function(){function e(){Object(h.a)(this,e),this.storageAssistant=void 0,this.filters=void 0,this.filterCache=void 0,this.searchPattern=void 0,this.translator=void 0,this.translatorLoading=void 0,this.componentModels=void 0,this.refinedModels=void 0,this.storageAssistant=new K,this.filters=[],this.filterCache={},this.searchPattern="",this.translator=new U,this.translatorLoading=!1,this.componentModels=[],this.refinedModels=[],this.storageAssistant.loadFile()}return Object(m.a)(e,[{key:"IsTranslatationReady",value:function(){return this.translator.IsReady()}},{key:"LoadTranslation",value:function(){var e=Object(M.a)(w.a.mark((function e(t){var n,r=this;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.translatorLoading=!0,this.translator.LoadTranslation(t),n=new Promise((function(e,t){r.translator.AddOnLoadedCallback((function(){r.translatorLoading=!1,r.RefreshModels(),r.RefineSearch(),e()}))})),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"OnLoadTranslation",value:function(e){this.translator.AddOnLoadedCallback(e)}},{key:"GetTranslationName",value:function(){return this.translator.GetTranslationName()}},{key:"GetModel",value:function(){return"NONE"===this.translator.GetTranslationName()||"LOADING"===this.translator.GetTranslationName()?{ComponentModels:[],FilterNames:[],Translation:"NONE"}:{ComponentModels:this.refinedModels,FilterNames:this.filters.map((function(e){return e.name})),Translation:this.translator.GetTranslationName()}}},{key:"UpdateSearch",value:function(e){this.searchPattern=e,this.RefineSearch()}},{key:"Bookmark",value:function(e){var t=L.GetVerseID(e.Chapter,e.VerseNumber);this.storageAssistant.BookmarkVerse(t),this.ToggleSaved(e,!0),console.log("Saved verse: ",t," -- Bookmarked?: ",this.storageAssistant.isBookmarked(t))}},{key:"ToggleSaved",value:function(e,t){[this.componentModels,this.refinedModels].forEach((function(n){n.filter((function(t){if("Saying"===t.Type){var n=t.Model.Verses[0];return n.VerseNumber===e.VerseNumber&&n.Chapter===e.Chapter}if("Statement"===t.Type){var r=t.Model.Verse;return r.Chapter===e.Chapter&&r.VerseNumber===e.VerseNumber}return!1}))[0].Model.Saved=t}))}},{key:"RemoveBookmark",value:function(e){var t=L.GetVerseID(e.Chapter,e.VerseNumber);this.storageAssistant.removeBookmark(t),this.ToggleSaved(e,!1),console.log("Unsaved verse: ",t," -- Bookmarked?: ",this.storageAssistant.isBookmarked(t))}},{key:"CacheFilters",value:function(e){this.filterCache[e]=this.filters,this.filters=[],this.translator.IsReady()&&this.RefreshModels()}},{key:"RestoreFilters",value:function(e){e in this.filterCache&&(this.filters=this.filterCache[e]),this.translator.IsReady()&&this.RefreshModels()}},{key:"ClearFiltersNoRefresh",value:function(){this.filters=[]}},{key:"ClearFilters",value:function(){this.filters=[],this.translator.IsReady()&&this.RefreshModels()}},{key:"ApplyFilter",value:function(e){if(!(e in X))throw Error("Filter: "+e+", is not found. Please add a filter generator to ./api/FilterCollection.ts");for(var t=X[e],n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(r.length!==t.length)throw Error("Filter Generator for: "+e+", takes "+t.length+" params. See ./api/FilterCollection.ts");var o=t.apply(void 0,r);o.name=e,this.RemoveFilter(o.name),this.filters.push(o),this.translator.IsReady()&&this.RefreshModels()}},{key:"RemoveFilter",value:function(e){this.filters=this.filters.filter((function(t){return t.name!==e})),this.translator.IsReady()&&this.RefreshModels()}},{key:"UpdateBookmarkModelCache",value:function(e,t){[this.componentModels,this.refinedModels].forEach((function(n){n.forEach((function(n){if("Statement"===n.Type){var r=n.Model;L.GetVerseID(r.Verse.Chapter,r.Verse.VerseNumber)===e&&(r.Saved=t)}else if("Sayings"===n.Type){var a=n.Model;L.GetVerseID(a.Verses[0].Chapter,a.Verses[0].VerseNumber)===e&&(a.Saved=t)}else n.Type}))}))}},{key:"ClearHighlights",value:function(){this.componentModels.forEach((function(e){if("Saying"===e.Type)e.Model.Verses.forEach((function(e){e.SearchHighlights=void 0}));else if("Statement"===e.Type){e.Model.Verse.SearchHighlights=void 0}else if("Article"===e.Type){e.Model.Verses.forEach((function(e){e.SearchHighlights=void 0}))}}))}},{key:"RefreshModels",value:function(){var e=this,t=L.PermuteVerses();this.filters.forEach((function(e){t=t.filter(e.callback)})),t.forEach((function(e){L.LoadVerseMetadata(e)}));var n=t.reduce((function(e,t){var n;if(!t.Type)throw Error("verse must have type to be bundled");return n=t.Type,t.GroupID&&(n+="-",n+=t.GroupID),n in e||(e[n]=[]),e[n].push(t),e}),{}),r=Object.values(n).map((function(t){var n=t.map((function(t){return e.translator.GetContent(L.GetVerseID(t.Chapter,t.VerseNumber))}));if(t[0].TitlePrefix){var r=n[0].Content,a=!1;[".",":"].forEach((function(e){var t=n[0].Content.split(e),o=t[0]+e;o.length<r.length&&t.length>=2&&(r=o,n[0].Content=t[1].trimLeft(),a=!0)})),a&&(t[0].TitlePrefix=r)}if(!t[0].Type)throw Error("Type must be defined for VerseSignature when creating models");var o=t[0].Type,s=void 0;if("Title"===t[0].Type)s={Text:n[0].Content,Ref:"Proverbs "+n[0].Chapter+n[0].VerseNumber};else if("Statement"===t[0].Type){var i=n[0],l=L.GetVerseID(i.Chapter,i.VerseNumber);s={Verse:i,Saved:e.storageAssistant.isBookmarked(l),ID:l}}else if("Saying"===t[0].Type){if(!t[0].GroupID)throw Error("GroupID must be defined for Sayings when creating model");s={Verses:n,Saved:!1,ID:t[0].GroupID}}else if("Article"===t[0].Type){if(!t[0].GroupID)throw Error("GroupID must be defined for Article when creating model");s={Verses:n,ID:t[0].GroupID}}if(!s)throw console.log("bundle failure: ",t),Error("model not set (undefined)");return{Type:o,Model:s}}));this.componentModels=r,this.RefineSearch()}},{key:"RefineSearch",value:function(){var e=this.searchPattern.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(""===e)return this.ClearHighlights(),void(this.refinedModels=this.componentModels);var t=this.componentModels.map((function(t){if("Saying"===t.Type)return t.Model.Verses.map((function(t){return L.SearchVerseClear(t),L.SearchVerseHighlight(t,e),t})).some((function(e){return e}))?t:void 0;if("Statement"===t.Type){var n=t.Model;return L.SearchVerseClear(n.Verse),L.SearchVerseHighlight(n.Verse,e)?t:void 0}if("Article"===t.Type){var r=t.Model,a=r.Verses.filter((function(t){return L.SearchVerseHighlight(t,e)}));if(0===a.length)return;return{Type:"Article",Model:{Verses:a,ID:r.ID}}}return"Title"===t.Type?t:void 0})).filter((function(e){return!!e}));this.refinedModels=t}}]),e}()),Q=function(){return Object(c.K)((function(){P.a.App.addListener("appStateChange",(function(e){e.isActive&&(new H).NotificationSetter()}))})),a.a.createElement(a.a.Fragment,null,a.a.createElement(c.c,null,a.a.createElement(l.a,null,a.a.createElement(c.F,null,a.a.createElement(c.x,null,a.a.createElement(i.c,{path:"/library",component:function(){return a.a.createElement(B,{contentManager:Y})},exact:!0}),a.a.createElement(i.c,{path:"/bookmarked",component:W,exact:!0}),a.a.createElement(i.c,{path:"/bookmarked/details",component:z}),a.a.createElement(i.c,{path:"/discover",component:function(){return a.a.createElement(q,{contentManager:Y})},exact:!0}),a.a.createElement(i.c,{path:"/",render:function(){return a.a.createElement(i.b,{to:"/library"})},exact:!0})),a.a.createElement(c.D,{slot:"bottom"},a.a.createElement(c.E,{tab:"library",href:"/library"},a.a.createElement(c.l,{icon:u.p}),a.a.createElement(c.n,null,"Library")),a.a.createElement(c.E,{tab:"bookmarked",href:"/bookmarked"},a.a.createElement(c.l,{icon:u.c}),a.a.createElement(c.n,null,"Bookmarked")),a.a.createElement(c.E,{tab:"discover",href:"/discover"},a.a.createElement(c.l,{icon:u.z}),a.a.createElement(c.n,null,"Discover")))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[58,7,8]]]);
//# sourceMappingURL=main.7eab0511.chunk.js.map